from github import Github
from dotenv import load_dotenv
import os

load_dotenv()

# Ensure the token is loaded correctly
github_token = os.getenv("GITHUB_TOKEN")
print(f"Loaded GitHub Token: {github_token}")


# Check if the token is loaded (optional debug step)
if not github_token:
    print("GitHub token is not set correctly.")
else:
    g = Github(github_token)

    # Check if authentication works
    user = g.get_user()
    print(f"Authenticated as {user.login}")

    # List all repositories
    print("Repositories:")
    repos = user.get_repos()
    for repo in repos:
        print(f"- {repo.name}")

    # Create a new repository
    new_repo = user.create_repo("NewRepoFromScript")
    print(f"New repository created: {new_repo.name}")
